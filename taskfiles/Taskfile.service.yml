# ============================================================================
# GENERATED FILE - DO NOT EDIT MANUALLY
# ============================================================================
# Generated by: xplat gen service
# Regenerate with: xplat gen service --force
# Source: https://github.com/joeblew999/xplat
# ============================================================================
#
# Reusable service taskfile for remote inclusion by xplat consumers.
# Consumers include this via: xplat pkg install plat-splat
#
# Provides standardized service management tasks (start, stop, status)
# that work with the polyform binary installed by xplat.
# ============================================================================

version: "3"

vars:
  POLYFORM_BIN: '{{ .POLYFORM_BIN | default "polyform" }}'
  POLYFORM_PORT: '{{ .POLYFORM_PORT | default "8080" }}'
  POLYFORM_HOST: '{{ .POLYFORM_HOST | default "0.0.0.0" }}'

tasks:
  start:
    desc: Start the plat-splat service
    cmds:
      - '{{ .POLYFORM_BIN }} serve --port {{ .POLYFORM_PORT }} --host {{ .POLYFORM_HOST }}'

  stop:
    desc: Stop the plat-splat service
    cmds:
      - pkill -f "{{ .POLYFORM_BIN }} serve" || true

  status:
    desc: Check if plat-splat service is running
    cmds:
      - |
        if pgrep -f "{{ .POLYFORM_BIN }} serve" > /dev/null; then
          echo "plat-splat: running"
        else
          echo "plat-splat: not running"
          exit 1
        fi

  restart:
    desc: Restart the plat-splat service
    cmds:
      - task: stop
      - task: start
